import e,{forwardRef as n,useState as t,useRef as r,useMemo as o,useEffect as a,useImperativeHandle as i}from"react";function l(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{d(r.next(e))}catch(e){a(e)}}function l(e){try{d(r.throw(e))}catch(e){a(e)}}function d(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,l)}d((r=r.apply(e,n||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const d=n=>{const{nextArrow:t,prevArrow:r,currentIndex:o,itemCount:a,prevCard:i,nextCard:l}=n;return e.createElement(e.Fragment,null,e.createElement("button",{className:"cardCarousel-arrow prev-button "+(0===o?"disabled":"active"),onClick:i},e.isValidElement(r)?r:e.createElement("span",{className:"cardCarousel-arrow-inner"})),e.createElement("button",{className:"cardCarousel-arrow next-button "+(o===a?"disabled":"active"),onClick:l},e.isValidElement(t)?t:e.createElement("span",{className:"cardCarousel-arrow-inner"})))},c=n=>{const{itemCount:t,currentIndex:r,goToCard:o}=n,a=[];for(let n=0;n<=t;n++)a.push(e.createElement("button",{key:n,onClick:()=>o(n),className:"cardCarousel-pagination-button "+(r===n?"active":"")}));return e.createElement("div",{className:"cardCarousel-pagination"},a)};!function(e,n){void 0===n&&(n={});var t=n.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('.cardCarousel {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow: hidden;\n}\n.cardCarousel.resizing * {\n  transition: none !important;\n  animation: none !important;\n}\n.cardCarousel .cardCarousel-arrow,\n.cardCarousel .cardCarousel-pagination-button {\n  cursor: pointer;\n  padding: 0;\n  border: none;\n  outline: none;\n  background: none;\n}\n\n.cardCarousel-inner {\n  position: relative;\n}\n\n.cardCarousel-items {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n.cardCarousel-items.itemsContained {\n  margin: 0 auto;\n}\n\n.cardCarousel-item-content {\n  width: auto;\n  display: inline-block;\n  overflow: hidden;\n  max-width: 100vw;\n}\n\n.cardCarousel-arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 10;\n  opacity: 1;\n  visibility: visible;\n  transition: all 400ms ease-out;\n}\n.cardCarousel-arrow.disabled {\n  opacity: 0;\n  visibility: hidden;\n}\n.cardCarousel-arrow:hover .cardCarousel-arrow-inner {\n  background-color: black;\n}\n.cardCarousel-arrow:hover .cardCarousel-arrow-inner:before {\n  border-color: white;\n}\n\n.cardCarousel-arrow-inner {\n  display: flex;\n  width: 60px;\n  height: 60px;\n  border-radius: 30px;\n  background-color: white;\n  position: relative;\n  transition: all 300ms ease-out;\n}\n.cardCarousel-arrow-inner:before {\n  content: "";\n  display: block;\n  margin: auto auto auto 20px;\n  width: 12px;\n  height: 12px;\n  border-top: 2px solid black;\n  border-right: 2px solid black;\n  transform: rotate(45deg);\n  transition: all 300ms ease-out;\n}\n\n.prev-button {\n  left: 20px;\n}\n.prev-button .cardCarousel-arrow-inner {\n  transform: rotate(180deg);\n}\n@media screen and (min-width: 768px) {\n  .prev-button {\n    left: 50px;\n  }\n}\n\n.next-button {\n  right: 20px;\n}\n@media screen and (min-width: 768px) {\n  .next-button {\n    right: 50px;\n  }\n}\n\n.cardCarousel-pagination {\n  width: auto;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 10px;\n  position: relative;\n  margin: 40px auto 0;\n}\n.cardCarousel-pagination .cardCarousel-pagination-button {\n  display: block;\n  width: 10px;\n  height: 10px;\n  border-radius: 5px;\n  border: 1px solid black;\n  background-color: transparent;\n  transition: all 300ms ease-out;\n}\n.cardCarousel-pagination .cardCarousel-pagination-button.active, .cardCarousel-pagination .cardCarousel-pagination-button:hover {\n  background-color: black;\n}');const s=n(((n,s)=>{const{children:u,settings:p}=n,h={gap:20,padding:50,cardsToShow:0,transitionSpeed:300,centerMode:!1,yieldToImages:!1,pagination:!1,touchControls:!0,arrows:!0,nextArrow:null,prevArrow:null,beforeChange:null,afterChange:null,onTouchStart:null,onTouchMove:null,onTouchEnd:null},[v,m]=t(Object.assign(Object.assign({},h),p)),[g,f]=t(0),[w,C]=t(!0),[x,b]=t(0),[y,E]=t(!1),[T,S]=t(0),[k,L]=t(0),[A,M]=t(0),[N,$]=t(!1),[B,I]=t(!1),[P,R]=t(!1),[V,W]=t(!1),j=r(null),z=r(0),O=r(null),H=r(null),X=r(0);o((()=>{m(Object.assign(Object.assign({},h),p))}),[p]),a((()=>{(null==u?void 0:u.length)&&A!==u.length-1&&M(u.length-1)}),[u]),a((()=>{B&&(Z(`${X.current}px`),setTimeout((()=>{I(!1)}),v.transitionSpeed))}),[B,v.transitionSpeed]),a((()=>{0!==A&&0===T&&D()}),[O.current,A]),a((()=>{!y&&0!==T&&F()}),[y,T]),a((()=>{D(),F()}),[A,v.gap,v.padding,v.centerMode,v.yieldToImages,x]),a((()=>{q()}),[v.cardsToShow]),a((()=>{0!==v.cardsToShow&&0===x&&q()}),[H.current]),a((()=>(window.addEventListener("resize",Y),z.current=window.innerWidth,()=>{window.removeEventListener("resize",Y)})),[void 0!==typeof window,N,A]);const Y=()=>{if(clearTimeout(j.current),window.innerWidth!==z.current){const e=H.current.getBoundingClientRect();H.current.style.width=`${e.width}px`,H.current.style.height=`${e.height}px`,O.current.style.position="absolute",S(99999),E(!0),z.current=window.innerWidth,j.current=setTimeout((()=>{O.current.style.removeProperty("position"),H.current.style.removeProperty("width"),H.current.style.removeProperty("height"),E(!1),q(),D(),j.current=null}),500)}},F=()=>{var e,n;const t=null===(e=O.current)||void 0===e?void 0:e.getBoundingClientRect(),r=null===(n=H.current)||void 0===n?void 0:n.getBoundingClientRect();C((null==t?void 0:t.width)<=(null==r?void 0:r.width)),G(0)};a((()=>{w&&Z(0)}),[w]);const q=()=>{var e;const n=null===(e=H.current)||void 0===e?void 0:e.getBoundingClientRect();0!==v.cardsToShow&&H.current&&b(n.width/v.cardsToShow)},D=()=>{if(!O.current)return;const e=O.current.children,n=v.gap*A;if(e){let t=0;const r=e=>{const n=e.children[0],r=null==n?void 0:n.offsetWidth;t+=v.cardsToShow>0?x:r};v.yieldToImages&&!N?Promise.all(Array.from(e).map((e=>(e=>{const n=e.querySelectorAll("img");return n&&"object"==typeof n?Promise.all(Array.from(n).map((e=>new Promise((n=>{e.complete&&n(1),e.onload=e.onerror=n}))))):Promise.resolve(!0)})(e).then((()=>{r(e)}))))).then((()=>{$(!0),S(t+n)})):(Array.from(e).map((e=>{r(e)})),S(t+n))}},G=e=>l(void 0,void 0,void 0,(function*(){var n;let t=0;if(k===e&&0===k&&!v.centerMode)return X.current=t,void I(!0);const r=e>=k?"next":"prev",o=O.current.children.item(e);if(!o)return;const a=null===(n=H.current)||void 0===n?void 0:n.getBoundingClientRect();if(v.beforeChange&&k!==e&&v.beforeChange(k,e),v.centerMode)t=yield((e,n)=>{if(!(e&&e instanceof HTMLElement&&n))return;return.5*n.width-(e.offsetLeft+.5*e.offsetWidth)})(o,a);else{const{moveVal:n,atStart:i,atEnd:l}=yield((e,n,t,r="next")=>{if(!(e&&e instanceof HTMLElement&&n instanceof HTMLElement&&t))return;const o=n.getBoundingClientRect(),a=-1*(o.width-t.width),i={moveVal:0,atStart:!1,atEnd:!1};return"next"===r&&(i.moveVal=-1*e.offsetLeft,o.width-e.offsetLeft<=t.width&&(i.moveVal=a,i.atEnd=!0)),"prev"===r&&(i.moveVal=-1*(e.offsetLeft-t.width+e.offsetWidth),-1*(e.offsetLeft-t.width+e.offsetWidth)>=0&&(i.moveVal=0,i.atStart=!0)),i})(o,O.current,a,r);t=n,i?e=0:l&&(e=A)}X.current=t,I(!0),L(e),v.afterChange&&k!==e&&v.afterChange(e)}));let J=0;const K=e=>{var n;J=null===(n=null==e?void 0:e.changedTouches[0])||void 0===n?void 0:n.clientY},Q=e=>{var n;if(V)return e.preventDefault(),!1;const t=null===(n=null==e?void 0:e.changedTouches[0])||void 0===n?void 0:n.clientY;Math.abs(J-t)>5&&R(!0)},U=e=>{R(!1),W(!1)};a((()=>(window.addEventListener("touchstart",K),window.addEventListener("touchmove",Q,{passive:!1}),window.addEventListener("touchend",U),()=>{window.removeEventListener("touchstart",K),window.removeEventListener("touchmove",Q),window.removeEventListener("touchend",U)})),[V]);const Z=e=>{(w||null!==j.current)&&(e=0),O.current.style.transform=`translateX(${e})`},_=e=>{var n;const t=null===(n=H.current)||void 0===n?void 0:n.getBoundingClientRect(),r=O.current.children,o=t.width/2,a=v.gap/2;Array.from(r).map(((e,n)=>{const r=e.getBoundingClientRect();(r.left-t.left-a<=o&&r.right-t.left+a>=o||r.left>o&&0===n||r.right<o&&A===n)&&G(n)}))},ee=e=>{let n=0;return n="next"===e?k+1<A?k+1:A:k-1>0?k-1:0,G(n)},ne=()=>ee("next"),te=()=>ee("prev"),re=e=>{O.current&&H.current&&G(e)};return i(s,(()=>({nextCard:ne,prevCard:te,goToCard:e=>re(e),getCurrentIndex:()=>k}))),!(null==u?void 0:u.length)||(null==u?void 0:u.length)<1?null:e.createElement("div",{className:`cardCarousel ${y?"resizing":""} ${0!==T?"show":""}`,style:{padding:`0 ${v.padding}px`}},e.createElement("div",{className:"cardCarousel-inner",ref:H,onTouchStart:e=>{var n,t;if(!v.touchControls||P)return;const r=null!==(n=e.x)&&void 0!==n?n:null===(t=null==e?void 0:e.changedTouches[0])||void 0===t?void 0:t.clientX;f(r),v.onTouchStart&&v.onTouchStart(r)},onTouchMove:e=>{var n,t;if(!v.touchControls||P)return;const r=(null!==(n=e.x)&&void 0!==n?n:null===(t=null==e?void 0:e.changedTouches[0])||void 0===t?void 0:t.clientX)-g;v.onTouchMove&&v.onTouchMove(r),Math.abs(r)>5&&W(!0),Z(`${X.current+1.25*r}px`)},onTouchEnd:()=>{R(!1),W(!1),v.touchControls&&(v.onTouchEnd&&v.onTouchEnd(),_())}},e.createElement("div",{ref:O,className:"cardCarousel-items "+(v.centerMode?"itemsContained":""),style:{display:"flex",alignItems:"center",width:0!==T?`${T}px`:"99999px",gap:`${v.gap}px`,transition:B?`transform ease-in-out ${v.transitionSpeed}ms`:""}},null==u?void 0:u.map(((n,t)=>e.createElement("div",{key:t,className:"cardCarousel-item-content","data-active":t===k,style:x?{width:`${x}px`}:{}},n))))),!w&&e.createElement(e.Fragment,null,v.pagination&&e.createElement(c,{currentIndex:k,itemCount:A,goToCard:re}),v.arrows&&e.createElement(d,{nextArrow:v.nextArrow,prevArrow:v.prevArrow,currentIndex:k,prevCard:te,itemCount:A,nextCard:ne})))}));export{s as default};
//# sourceMappingURL=index.es.js.map
