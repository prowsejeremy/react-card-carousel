"use strict";var e=require("react");function n(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,l)}s((r=r.apply(e,n||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const t=n=>{const{nextArrow:t,prevArrow:r,currentIndex:o,itemCount:a,prevCard:i,nextCard:l}=n;return e.createElement(e.Fragment,null,e.createElement("button",{className:"cardCarousel-arrow prev-button "+(0===o?"disabled":"active"),onClick:i},e.createElement(e.Fragment,null,r||e.createElement("span",{className:"cardCarousel-arrow-inner"}))),e.createElement("button",{className:"cardCarousel-arrow next-button "+(o===a?"disabled":"active"),onClick:l},e.createElement(e.Fragment,null,t||e.createElement("span",{className:"cardCarousel-arrow-inner"}))))},r=n=>{const{itemCount:t,currentIndex:r,goToCard:o}=n,a=[];for(let n=0;n<=t;n++)a.push(e.createElement("button",{key:n,onClick:()=>o(n),className:"cardCarousel-pagination-button "+(r===n?"active":"")}));return e.createElement("div",{className:"cardCarousel-pagination"},a)};!function(e,n){void 0===n&&(n={});var t=n.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('.cardCarousel {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow: hidden;\n}\n.cardCarousel.resizing * {\n  transition: none !important;\n  animation: none !important;\n}\n.cardCarousel .cardCarousel-arrow,\n.cardCarousel .cardCarousel-pagination-button {\n  cursor: pointer;\n  padding: 0;\n  border: none;\n  outline: none;\n  background: none;\n}\n\n.cardCarousel-inner {\n  position: relative;\n}\n\n.cardCarousel-items {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n.cardCarousel-items.itemsContained {\n  margin: 0 auto;\n}\n\n.cardCarousel-item-content {\n  width: auto;\n  display: inline-block;\n  overflow: hidden;\n  max-width: 100vw;\n}\n\n.cardCarousel-arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 10;\n  opacity: 1;\n  visibility: visible;\n  transition: all 400ms ease-out;\n}\n.cardCarousel-arrow.disabled {\n  opacity: 0;\n  visibility: hidden;\n}\n.cardCarousel-arrow:hover .cardCarousel-arrow-inner {\n  background-color: black;\n}\n.cardCarousel-arrow:hover .cardCarousel-arrow-inner:before {\n  border-color: white;\n}\n\n.cardCarousel-arrow-inner {\n  display: flex;\n  width: 60px;\n  height: 60px;\n  border-radius: 30px;\n  background-color: white;\n  position: relative;\n  transition: all 300ms ease-out;\n}\n.cardCarousel-arrow-inner:before {\n  content: "";\n  display: block;\n  margin: auto auto auto 20px;\n  width: 12px;\n  height: 12px;\n  border-top: 2px solid black;\n  border-right: 2px solid black;\n  transform: rotate(45deg);\n  transition: all 300ms ease-out;\n}\n\n.prev-button {\n  left: 20px;\n}\n.prev-button .cardCarousel-arrow-inner {\n  transform: rotate(180deg);\n}\n@media screen and (min-width: 768px) {\n  .prev-button {\n    left: 50px;\n  }\n}\n\n.next-button {\n  right: 20px;\n}\n@media screen and (min-width: 768px) {\n  .next-button {\n    right: 50px;\n  }\n}\n\n.cardCarousel-pagination {\n  width: auto;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 10px;\n  position: relative;\n  margin: 40px auto 0;\n}\n.cardCarousel-pagination .cardCarousel-pagination-button {\n  display: block;\n  width: 10px;\n  height: 10px;\n  border-radius: 5px;\n  border: 1px solid black;\n  background-color: transparent;\n  transition: all 300ms ease-out;\n}\n.cardCarousel-pagination .cardCarousel-pagination-button.active, .cardCarousel-pagination .cardCarousel-pagination-button:hover {\n  background-color: black;\n}');const o=e.forwardRef(((o,a)=>{const{children:i,settings:l}=o,s={gap:20,padding:50,cardsToShow:0,transitionSpeed:300,centerMode:!1,yieldToImages:!1,pagination:!1,touchControls:!0,arrows:!0,nextArrow:null,prevArrow:null,beforeChange:null,afterChange:null,onTouchStart:null,onTouchMove:null,onTouchEnd:null},[d,c]=e.useState(Object.assign(Object.assign({},s),l)),[u,p]=e.useState(0),[h,v]=e.useState(!0),[f,m]=e.useState(0),[g,w]=e.useState(!1),[C,x]=e.useState(0),[b,y]=e.useState(0),[E,T]=e.useState(0),[S,k]=e.useState(!1),[L,M]=e.useState(!1),[A,R]=e.useState(!1),[N,$]=e.useState(!1),B=e.useRef(null),I=e.useRef(0),P=e.useRef(null),W=e.useRef(null),V=e.useRef(0);e.useMemo((()=>{c(Object.assign(Object.assign({},s),l))}),[l]),e.useEffect((()=>{(null==i?void 0:i.length)&&E!==i.length-1&&T(i.length-1)}),[i]),e.useEffect((()=>{L&&(G(`${V.current}px`),setTimeout((()=>{M(!1)}),d.transitionSpeed))}),[L,d.transitionSpeed]),e.useEffect((()=>{0!==E&&0===C&&H()}),[P.current,E]),e.useEffect((()=>{!g&&0!==C&&z()}),[g,C]),e.useEffect((()=>{H(),z()}),[E,d.gap,d.padding,d.centerMode,d.yieldToImages,f]),e.useEffect((()=>{F()}),[d.cardsToShow]),e.useEffect((()=>{0!==d.cardsToShow&&0===f&&F()}),[W.current]),e.useEffect((()=>(window.addEventListener("resize",j),I.current=window.innerWidth,()=>{window.removeEventListener("resize",j)})),[void 0!==typeof window,S,E]);const j=()=>{if(clearTimeout(B.current),window.innerWidth!==I.current){const e=W.current.getBoundingClientRect();W.current.style.width=`${e.width}px`,W.current.style.height=`${e.height}px`,P.current.style.position="absolute",x(99999),w(!0),I.current=window.innerWidth,B.current=setTimeout((()=>{P.current.style.removeProperty("position"),W.current.style.removeProperty("width"),W.current.style.removeProperty("height"),w(!1),F(),H(),B.current=null}),500)}},z=()=>{var e,n;const t=null===(e=P.current)||void 0===e?void 0:e.getBoundingClientRect(),r=null===(n=W.current)||void 0===n?void 0:n.getBoundingClientRect();v((null==t?void 0:t.width)<=(null==r?void 0:r.width)),O(0)};e.useEffect((()=>{h&&G(0)}),[h]);const F=()=>{var e;const n=null===(e=W.current)||void 0===e?void 0:e.getBoundingClientRect();0!==d.cardsToShow&&W.current&&m(n.width/d.cardsToShow)},H=()=>{if(!P.current)return;const e=P.current.children,n=d.gap*E;if(e){let t=0;const r=e=>{const n=e.children[0],r=null==n?void 0:n.offsetWidth;t+=d.cardsToShow>0?f:r};d.yieldToImages&&!S?Promise.all(Array.from(e).map((e=>(e=>{const n=e.querySelectorAll("img");return n&&"object"==typeof n?Promise.all(Array.from(n).map((e=>new Promise((n=>{e.complete&&n(1),e.onload=e.onerror=n}))))):Promise.resolve(!0)})(e).then((()=>{r(e)}))))).then((()=>{k(!0),x(t+n)})):(Array.from(e).map((e=>{r(e)})),x(t+n))}},O=e=>n(void 0,void 0,void 0,(function*(){var n;let t=0;if(b===e&&0===b&&!d.centerMode)return V.current=t,void M(!0);const r=e>=b?"next":"prev",o=P.current.children.item(e);if(!o)return;const a=null===(n=W.current)||void 0===n?void 0:n.getBoundingClientRect();if(d.beforeChange&&b!==e&&d.beforeChange(b,e),d.centerMode)t=yield((e,n)=>{if(!(e&&e instanceof HTMLElement&&n))return;return.5*n.width-(e.offsetLeft+.5*e.offsetWidth)})(o,a);else{const{moveVal:n,atStart:i,atEnd:l}=yield((e,n,t,r="next")=>{if(!(e&&e instanceof HTMLElement&&n instanceof HTMLElement&&t))return;const o=n.getBoundingClientRect(),a=-1*(o.width-t.width),i={moveVal:0,atStart:!1,atEnd:!1};return"next"===r&&(i.moveVal=-1*e.offsetLeft,o.width-e.offsetLeft<=t.width&&(i.moveVal=a,i.atEnd=!0)),"prev"===r&&(i.moveVal=-1*(e.offsetLeft-t.width+e.offsetWidth),-1*(e.offsetLeft-t.width+e.offsetWidth)>=0&&(i.moveVal=0,i.atStart=!0)),i})(o,P.current,a,r);t=n,i?e=0:l&&(e=E)}V.current=t,M(!0),y(e),d.afterChange&&b!==e&&d.afterChange(e)}));let X=0;const Y=e=>{var n;X=null===(n=null==e?void 0:e.changedTouches[0])||void 0===n?void 0:n.clientY},q=e=>{var n;if(N)return e.preventDefault(),!1;const t=null===(n=null==e?void 0:e.changedTouches[0])||void 0===n?void 0:n.clientY;Math.abs(X-t)>5&&R(!0)},D=e=>{R(!1),$(!1)};e.useEffect((()=>(window.addEventListener("touchstart",Y),window.addEventListener("touchmove",q,{passive:!1}),window.addEventListener("touchend",D),()=>{window.removeEventListener("touchstart",Y),window.removeEventListener("touchmove",q),window.removeEventListener("touchend",D)})),[N]);const G=e=>{(h||null!==B.current)&&(e=0),P.current.style.transform=`translateX(${e})`},J=e=>{var n;const t=null===(n=W.current)||void 0===n?void 0:n.getBoundingClientRect(),r=P.current.children,o=t.width/2,a=d.gap/2;Array.from(r).map(((e,n)=>{const r=e.getBoundingClientRect();(r.left-t.left-a<=o&&r.right-t.left+a>=o||r.left>o&&0===n||r.right<o&&E===n)&&O(n)}))},K=e=>{let n=0;return n="next"===e?b+1<E?b+1:E:b-1>0?b-1:0,O(n)},Q=()=>K("next"),U=()=>K("prev"),Z=e=>{P.current&&W.current&&O(e)};return e.useImperativeHandle(a,(()=>({nextCard:Q,prevCard:U,goToCard:e=>Z(e),getCurrentIndex:()=>b}))),!(null==i?void 0:i.length)||(null==i?void 0:i.length)<1?null:e.createElement("div",{className:`cardCarousel ${g?"resizing":""} ${0!==C?"show":""}`,style:{padding:`0 ${d.padding}px`}},e.createElement("div",{className:"cardCarousel-inner",ref:W,onTouchStart:e=>{var n,t;if(!d.touchControls||A)return;const r=null!==(n=e.x)&&void 0!==n?n:null===(t=null==e?void 0:e.changedTouches[0])||void 0===t?void 0:t.clientX;p(r),d.onTouchStart&&d.onTouchStart(r)},onTouchMove:e=>{var n,t;if(!d.touchControls||A)return;const r=(null!==(n=e.x)&&void 0!==n?n:null===(t=null==e?void 0:e.changedTouches[0])||void 0===t?void 0:t.clientX)-u;d.onTouchMove&&d.onTouchMove(r),Math.abs(r)>5&&$(!0),G(`${V.current+1.25*r}px`)},onTouchEnd:()=>{R(!1),$(!1),d.touchControls&&(d.onTouchEnd&&d.onTouchEnd(),J())}},e.createElement("div",{ref:P,className:"cardCarousel-items "+(d.centerMode?"itemsContained":""),style:{display:"flex",alignItems:"center",width:0!==C?`${C}px`:"99999px",gap:`${d.gap}px`,transition:L?`transform ease-in-out ${d.transitionSpeed}ms`:""}},null==i?void 0:i.map(((n,t)=>e.createElement("div",{key:t,className:"cardCarousel-item-content","data-active":t===b,style:f?{width:`${f}px`}:{}},n))))),!h&&e.createElement(e.Fragment,null,d.pagination&&e.createElement(r,{currentIndex:b,itemCount:E,goToCard:Z}),d.arrows&&e.createElement(t,{nextArrow:d.nextArrow,prevArrow:d.prevArrow,currentIndex:b,prevCard:U,itemCount:E,nextCard:Q})))}));module.exports=o;
//# sourceMappingURL=index.js.map
